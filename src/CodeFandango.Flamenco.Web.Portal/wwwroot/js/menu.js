var ui=(()=>{var h=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var g=s=>{throw TypeError(s)};var L=(s,e,t)=>e in s?h(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var E=(s,e)=>{for(var t in e)h(s,t,{get:e[t],enumerable:!0})},T=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of M(e))!S.call(s,i)&&i!==t&&h(s,i,{get:()=>e[i],enumerable:!(n=v(e,i))||n.enumerable});return s};var C=s=>T(h({},"__esModule",{value:!0}),s);var c=(s,e,t)=>L(s,typeof e!="symbol"?e+"":e,t),I=(s,e,t)=>e.has(s)||g("Cannot "+t);var m=(s,e,t)=>(I(s,e,"read from private field"),t?t.call(s):e.get(s)),f=(s,e,t)=>e.has(s)?g("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);var R={};E(R,{menu:()=>b});var o,u=class u{constructor(){}static get(e,t){var i;if(t){var n=Object.keys(t).map(a=>encodeURIComponent(a)+"="+encodeURIComponent(t[a])).join("&");e=e+(n!=""?"?"+n:"")}return m(i=u,o).call(i,"get",e)}static getHtml(e,t){var i;if(t){var n=Object.keys(t).map(a=>encodeURIComponent(a)+"="+encodeURIComponent(t[a])).join("&");e=e+(n!=""?"?"+n:"")}return m(i=u,o).call(i,"get",e,{},"document")}static post(e,t){var n;return m(n=u,o).call(n,"post",e,t)}static put(e,t){var n;return m(n=u,o).call(n,"put",e,t)}static delete(e,t){var i;if(t){var n=Object.keys(t).map(a=>encodeURIComponent(a)+"="+encodeURIComponent(t[a])).join("&");e=e+(n!=""?"?"+n:"")}return m(i=u,o).call(i,"delete",e)}};o=new WeakMap,f(u,o,(e,t,n,i)=>new Promise((a,d)=>{var r=new XMLHttpRequest;i&&(r.responseType=i),r.onload=()=>{if(r.status==200)try{if(i=="document"){a(r.response);return}var l=JSON.parse(r.responseText);l.successful?a(l):d(l)}catch(y){d()}else try{var l=JSON.parse(r.responseText);d(l)}catch(y){d(r.responseText)}},n?(r.open(e,t),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(JSON.stringify(n))):(r.open(e,t,!0),r.send())}));var p=u;var b=class{constructor(){c(this,"bodyElement");c(this,"menuElement");c(this,"subMenu");c(this,"loadingTimer",0);c(this,"menuItemClick",e=>{var t=e.currentTarget.getAttribute("data-submenu");if(t){e.preventDefault(),this.menuElement.querySelectorAll("a.menu-item").forEach(i=>i.classList.remove("active")),e.currentTarget.classList.add("active");var n=this.getSubMenu();n.classList.remove("hide"),this.loadSubMenuContent(t)}});this.bodyElement=document.querySelector("body"),this.menuElement=document.querySelector(".menu"),this.init(),window.addEventListener("click",e=>{var t=this.getSubMenu();this.menuElement.contains(e.target)||!t.contains(e.target)&&!t.classList.contains("hide")&&(t.classList.add("hide"),this.menuElement.querySelectorAll("a.menu-item").forEach(n=>n.classList.remove("active")))})}init(){this.bind()}getSubMenu(){return this.subMenu?this.subMenu:(this.subMenu=document.createElement("div"),this.subMenu.classList.add("sub-menu"),this.bodyElement.appendChild(this.subMenu),this.subMenu.classList.add("hide"),this.subMenu)}loading(e){clearTimeout(this.loadingTimer);var t=this.getSubMenu();if(!e){var n=t.querySelector(".loading");n&&n.remove();return}this.loadingTimer=setTimeout(()=>{t.innerHTML='<div class="loading"><i class="fas fa-spinner fa-spin fa-3x"></i></div>'},500)}loadSubMenuContent(e){this.loading(!0),this.getSubMenu().innerHTML="",p.getHtml("/menu/".concat(e)).then(t=>{this.loading(!1),this.getSubMenu().innerHTML=t.documentElement.querySelector("body").innerHTML})}bind(){this.menuElement.querySelectorAll("a.menu-item").forEach(e=>{e.removeEventListener("click",this.menuItemClick),e.addEventListener("click",this.menuItemClick)})}};return C(R);})();
